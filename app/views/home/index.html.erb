

<div class = "home-container">
  <div class ="home-center">
    <div class = "home-center-header">
    OPINIONS
    </div>

    <div class = "add-post-form rounded">
      <%= form_with model: @opinion, url: "/home", method: :post do |f| %>
      <div class = "m-3">
      ADD COMMENT
      </div>
      <div class = "m-2">
      <%= f.text_field :text, placeholder: "Post review"%>
      <%= f.submit "Post", class: "d-none"%>
      </div>
    <%end%>
    </div>

    <div class = "post-list">
    <%= @count%> REVIEWS
    <hr>

    <%@opinions.each do |opinion| %>
    <div class="post-details d-flex m-2 ">
    
      <div class="post-image">
        <%= opinion_check_pic(opinion) %>
      </div>


      <div class ="post-txt">
        <p><strong><%= link_to opinion.user.fullname, user_path(opinion.user.id), class: 'text-dark' %></strong></p>
        <p class="small"><%= opinion.text%></p>
      </div>

      <div class = "ms-auto border p-3">
    
      <%if !Vote.find_by(user_id: current_user, opinion_id: opinion.id)%>
      <%= link_to({controller: 'votes', action: 'create', op_id: opinion.id}, method: :post) do %>
        <i class="bi bi-star emt-str"></i>
        <%end%>
        <%else%>
        <%= link_to vote_path(id: opinion.id), method: :delete do %>
          <i class="bi bi-star-fill emt-str"></i>
          <%end%>

        <%end%>
      <div> <%= opinion.votes.count%> Votes </div>
      </div>
      
    </div>

  
    <hr>
    <%end%>

  </div>
  </div>


  <%= render "home_sidebar"%>


</div>

